import{u as K,a as B,b as T,c as V,r as P,o as n,d as j,w as f,e as d,f as a,I as p,g as c,h as u,T as E,i as L,F as A,j as D,k as l,n as m,t as k}from"./index-09bce65c.js";import{B as F,H,P as R}from"./popover-747d64e7.js";const z={key:0,class:"absolute top-2 right-2 flex h-2 w-2"},G=l("span",{class:"inline-flex h-full w-full animate-ping rounded-full bg-indigo-400 opacity-75 absolute"},null,-1),M=l("span",{class:"inline-flex h-2 w-2 rounded-full bg-indigo-400"},null,-1),U=[G,M],q={key:0,class:"h-24 flex justify-center items-center text-white",role:"alert"},J={key:1,class:"overflow-hidden shadow-lg ring-1 ring-black ring-opacity-5"},O={class:"relative h-fit flex flex-col justify-between w-[16rem] pl-[3rem] duration-300"},Q={class:"flex flex-col"},W={class:"mt-2 mb-1 text-sm"},X={class:"text-sm text-gray-300"},Y=["onClick","onKeydown"],Z={class:"flex"},$=["onClick","onKeydown"],ee=["onClick","onKeydown"],te=["onClick","onKeydown"],ie={key:2,class:"h-[2.5rem] flex justify-center items-center border-t hover:bg-gray-600 focus-visible:bg-gray-600 cursor-pointer duration-300",tabindex:"0",role:"button"},oe=l("div",{class:"text-white text-sm"},"See All Notifications",-1),se=[oe],ce={__name:"NotifyNotification",setup(ne){const v=K(),s=B(),I=T();function w(t){(t.type==="click"||t.code==="Space"||t.code==="Enter")&&s.toggleNotifyPing(!1)}function _(t){(t.type==="click"||t.code==="Space"||t.code==="Enter")&&v.showInvoicesViewAll()}function x(t,i){(i.type==="click"||i.code==="Space"||i.code==="Enter")&&I.deleteTransferFromNotification(t)}const N=V(()=>[...s.notifications].slice(0,3));function C(t){if(t==="invoice")return"iconamoon:invoice-bold";if(t==="transfer")return"mingcute:transfer-fill";if(t==="account")return"carbon:account"}function S(t,i){if(t==="invoice"&&i==="pending")return"Pending invoice";if(t==="invoice"&&i==="successful")return"Invoice successfully added";if(t==="invoice"&&i==="deleted")return"Invoice removed";if(t==="transfer"&&i==="successful")return"New transfer added";if(t==="transfer"&&i==="deleted")return"Transfer removed";if(t==="transfer"&&i==="updated")return"Transfer updated";if(t==="account")return"New account added"}let h=P([]);function y(t,i,r){if(r.type==="click"||r.code==="Space"||r.code==="Enter"){if(s.removeNotification(t),!s.notifications.length)return;let e=s.notifications.length===i?s.notifications.length-1:i;h.value[e].children[0].removeAttribute("aria-live"),h.value[e].children[0].setAttribute("aria-live","assertive"),h.value[e].focus()}}function g(t,i){if(i.type==="click"||i.code==="Space"||i.code==="Enter"){const r=v.invoiceData.find(e=>e.id===t.invoiceId);v.updateInvData2BeRemoved(r),r.status==="Pending"&&(s.pendingNotifyIdDeleteInvoice=t.id),v.updateDelInvModalVisibility(!0)}}return(t,i)=>(n(),j(a(R),{class:"relative"},{default:f(({open:r})=>[d(a(F),{class:"p-2 bg-gray-900 rounded-full text-gray-300 outline-none hover:ring-1 hover:ring-white hover:text-white focus-visible:ring-1 focus-visible:ring-white duration-300",onClick:w,onKeydown:w,"aria-label":a(s).notifyPingIsVisible?"new notifications available":"notifications"},{default:f(()=>[d(a(p),{icon:"mdi:bell-outline",class:"h-5 w-5","aria-hidden":"true"}),a(s).notifyPingIsVisible?(n(),c("div",z,U)):u("",!0)]),_:1},8,["aria-label"]),d(E,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:f(()=>[d(a(H),{class:"absolute left-0 w-[19rem] bg-gray-700 shadow overflow-hidden rounded-lg border border-gray-400 mt-2 z-20 duration-300"},{default:f(()=>[a(s).notifications.length===0?(n(),c("div",q," There are no notifications ")):(n(),c("div",J,[d(L,null,{default:f(()=>[(n(!0),c(A,null,D(a(N),(e,b)=>(n(),c("div",{key:b,class:"flex flex-col justify-center items-center py-2 text-white rounded hover:bg-gray-400/50 focus-visible:bg-gray-400/50 focus:outline-none duration-200",tabindex:"0",ref_for:!0,ref_key:"refList",ref:h},[l("div",O,[l("div",{class:m(["absolute -left-1 top-0 h-11 w-11 rounded-full",{"bg-indigo-400/10":e.status==="pending","bg-green-400/10":e.status==="successful","bg-red-400/10":e.status==="deleted","bg-blue-400/10":e.status==="updated"}])},[l("div",{class:m(["absolute left-2 top-2 h-7 w-7 rounded-full",{"bg-indigo-400/30":e.status==="pending","bg-green-400/30":e.status==="successful","bg-red-400/30":e.status==="deleted","bg-blue-400/30":e.status==="updated"}])},null,2),d(a(p),{icon:C(e.type),class:m(["absolute left-3 top-3 h-5 w-5",{"text-indigo-300":e.status==="pending","text-green-400":e.status==="successful","text-red-400":e.status==="deleted"}])},null,8,["icon","class"])],2),l("div",Q,[l("h3",W,k(S(e.type,e.status)),1),l("div",X,k(e.message),1),l("div",{class:"absolute right-0 top-2 flex justify-center items-center h-6 w-6 cursor-pointer outline-none hover:text-yellow-400 focus-visible:text-yellow-400",onClick:o=>y(e.id,b,o),onKeydown:o=>y(e.id,b,o),tabindex:"0","aria-label":"remove notification"},[d(a(p),{icon:"ic:round-close",class:"h-5 w-5"})],40,Y)]),l("div",Z,[e.showCancelBtn?(n(),c("div",{key:0,class:"mt-2 text-sm cursor-pointer outline-none hover:text-yellow-400 focus-visible:text-yellow-400",onClick:o=>g(e,o),onKeydown:o=>g(e,o),tabindex:"0"}," Cancel ",40,$)):u("",!0),e.status==="successful"&&e.type==="invoice"?(n(),c("div",{key:1,class:"mt-2 text-sm cursor-pointer outline-none hover:text-yellow-400 focus-visible:text-yellow-400",onClick:o=>g(e,o),onKeydown:o=>g(e,o),tabindex:"0"}," Undo action ",40,ee)):u("",!0),e.status==="successful"&&e.type==="invoice"?(n(),c("div",{key:2,class:"mt-2 ml-4 text-sm cursor-pointer outline-none hover:text-yellow-400 focus-visible:text-yellow-400",onClick:_,onKeydown:_,tabindex:"0"}," View all invoices ",32)):u("",!0),e.type==="transfer"&&e.status==="successful"&&e.showRemoveBtn?(n(),c("div",{key:3,class:"mt-2 text-sm cursor-pointer outline-none hover:text-yellow-400 focus-visible:text-yellow-400",onClick:o=>x(e.company,o),onKeydown:o=>x(e.company,o),tabindex:"0"}," Remove transfer ",40,te)):u("",!0)])])]))),128))]),_:1})])),a(s).notifications.length>3?(n(),c("div",ie,se)):u("",!0)]),_:1})]),_:1})]),_:1}))}};export{ce as default};
