import{u as T,a as V,b as P,c as B,r as E,o as s,d as L,w as f,e as u,f as r,I as p,g as a,h as d,T as j,i as A,F as D,j as F,k as c,n as m,t as k}from"./index-b88a3259.js";import{B as H,H as R,P as z}from"./popover-e2352cb2.js";const G={key:0,class:"absolute top-2 right-2 flex h-2 w-2"},M=c("span",{class:"inline-flex h-full w-full animate-ping rounded-full bg-indigo-400 opacity-75 absolute"},null,-1),U=c("span",{class:"inline-flex h-2 w-2 rounded-full bg-indigo-400"},null,-1),q=[M,U],J={key:0,class:"h-24 flex justify-center items-center text-white",role:"alert"},O={key:1,class:"overflow-hidden shadow-lg ring-1 ring-black ring-opacity-5"},Q={class:"mt-2 mb-1 text-sm"},W={class:"text-sm text-gray-300"},X=["onClick","onKeydown"],Y={class:"flex"},Z=["onClick","onKeydown"],$=["onClick","onKeydown"],ee=["onClick","onKeydown"],te={key:2,class:"h-[2.5rem] flex justify-center items-center border-t hover:bg-gray-600 focus-visible:bg-gray-600 cursor-pointer duration-300",tabindex:"0",role:"button"},ie=c("div",{class:"text-white text-sm"},"See All Notifications",-1),oe=[ie],ae={__name:"NotifyNotification",setup(ne){const v=T(),n=V(),I=P();function w(t){(t.type==="click"||t.code==="Space"||t.code==="Enter")&&n.toggleNotifyPing(!1)}function _(t){(t.type==="click"||t.code==="Space"||t.code==="Enter")&&v.showInvoicesViewAll()}function x(t,i){(i.type==="click"||i.code==="Space"||i.code==="Enter")&&I.deleteTransferFromNotification(t)}const N=B(()=>[...n.notifications].slice(0,3));function S(t){if(t==="invoice")return"iconamoon:invoice-bold";if(t==="transfer")return"mingcute:transfer-fill";if(t==="account")return"carbon:account"}function C(t,i){if(t==="invoice"&&i==="pending")return"Pending invoice";if(t==="invoice"&&i==="successful")return"Invoice successfully added";if(t==="invoice"&&i==="deleted")return"Invoice removed";if(t==="transfer"&&i==="successful")return"New transfer added";if(t==="transfer"&&i==="deleted")return"Transfer removed";if(t==="transfer"&&i==="updated")return"Transfer updated";if(t==="account")return"New account added"}function K({status:t,showCancelBtn:i,showRemoveBtn:l,type:e}){if(e==="account"||t==="successful"&&e==="transfer"&&!l)return"h-[5rem]";if(t==="successful"&&!i)return"h-[6.5rem]";if(t==="pending"&&!i)return"h-[5rem]";if(t==="pending"&&i)return"h-[6.5rem]";if(t==="deleted"&&e==="transfer")return"h-[5rem]";if(t==="deleted")return"h-[3.5rem]"}let h=E([]);function y(t,i,l){if(l.type==="click"||l.code==="Space"||l.code==="Enter"){if(n.removeNotification(t),!n.notifications.length)return;let e=n.notifications.length===i?n.notifications.length-1:i;h.value[e].children[0].removeAttribute("aria-live"),h.value[e].children[0].setAttribute("aria-live","assertive"),h.value[e].focus()}}function g(t,i){if(i.type==="click"||i.code==="Space"||i.code==="Enter"){const l=v.invoiceData.find(e=>e.id===t.invoiceId);v.updateInvData2BeRemoved(l),l.status==="Pending"&&(n.pendingNotifyIdDeleteInvoice=t.id),v.updateDelInvModalVisibility(!0)}}return(t,i)=>(s(),L(r(z),{class:"relative"},{default:f(({open:l})=>[u(r(H),{class:"p-2 bg-gray-900 rounded-full text-gray-300 outline-none hover:ring-1 hover:ring-white hover:text-white focus-visible:ring-1 focus-visible:ring-white duration-300",onClick:w,onKeydown:w,"aria-label":r(n).notifyPingIsVisible?"new notifications available":"notifications"},{default:f(()=>[u(r(p),{icon:"mdi:bell-outline",class:"h-5 w-5","aria-hidden":"true"}),r(n).notifyPingIsVisible?(s(),a("div",G,q)):d("",!0)]),_:1},8,["aria-label"]),u(j,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:f(()=>[u(r(R),{class:"absolute left-0 w-[19rem] bg-gray-700 shadow overflow-hidden rounded-lg border border-gray-400 mt-2 z-20 duration-300"},{default:f(()=>[r(n).notifications.length===0?(s(),a("div",J," There are no notifications ")):(s(),a("div",O,[u(A,null,{default:f(()=>[(s(!0),a(D,null,F(r(N),(e,b)=>(s(),a("div",{key:b,class:"flex flex-col justify-center items-center py-2 text-white rounded hover:bg-gray-400/50 focus-visible:bg-gray-400/50 focus:outline-none duration-200",tabindex:"0",ref_for:!0,ref_key:"refList",ref:h},[c("div",{class:m(["relative flex flex-col items-start w-[16rem] pl-[3rem] duration-300",K(e)])},[c("div",{class:m(["absolute -left-1 top-0 h-11 w-11 rounded-full",{"bg-indigo-400/10":e.status==="pending","bg-green-400/10":e.status==="successful","bg-red-400/10":e.status==="deleted","bg-blue-400/10":e.status==="updated"}])},[c("div",{class:m(["absolute left-2 top-2 h-7 w-7 rounded-full",{"bg-indigo-400/30":e.status==="pending","bg-green-400/30":e.status==="successful","bg-red-400/30":e.status==="deleted","bg-blue-400/30":e.status==="updated"}])},null,2),u(r(p),{icon:S(e.type),class:m(["absolute left-3 top-3 h-5 w-5",{"text-indigo-300":e.status==="pending","text-green-400":e.status==="successful","text-red-400":e.status==="deleted"}])},null,8,["icon","class"])],2),c("h3",Q,k(C(e.type,e.status)),1),c("div",W,k(e.message),1),c("div",{class:"absolute right-0 top-2 flex justify-center items-center h-6 w-6 cursor-pointer outline-none hover:text-yellow-400 focus-visible:text-yellow-400",onClick:o=>y(e.id,b,o),onKeydown:o=>y(e.id,b,o),tabindex:"0","aria-label":"remove notification"},[u(r(p),{icon:"ic:round-close",class:"h-5 w-5"})],40,X),c("div",Y,[e.showCancelBtn?(s(),a("div",{key:0,class:"mt-2 text-sm cursor-pointer outline-none hover:text-yellow-400 focus-visible:text-yellow-400",onClick:o=>g(e,o),onKeydown:o=>g(e,o),tabindex:"0"}," Cancel ",40,Z)):d("",!0),e.status==="successful"&&e.type==="invoice"?(s(),a("div",{key:1,class:"mt-2 text-sm cursor-pointer outline-none hover:text-yellow-400 focus-visible:text-yellow-400",onClick:o=>g(e,o),onKeydown:o=>g(e,o),tabindex:"0"}," Undo action ",40,$)):d("",!0),e.status==="successful"&&e.type==="invoice"?(s(),a("div",{key:2,class:"mt-2 ml-4 text-sm cursor-pointer outline-none hover:text-yellow-400 focus-visible:text-yellow-400",onClick:_,onKeydown:_,tabindex:"0"}," View all invoices ",32)):d("",!0),e.type==="transfer"&&e.status==="successful"&&e.showRemoveBtn?(s(),a("div",{key:3,class:"mt-2 text-sm cursor-pointer outline-none hover:text-yellow-400 focus-visible:text-yellow-400",onClick:o=>x(e.company,o),onKeydown:o=>x(e.company,o),tabindex:"0"}," Remove transfer ",40,ee)):d("",!0)])],2)]))),128))]),_:1})])),r(n).notifications.length>3?(s(),a("div",te,oe)):d("",!0)]),_:1})]),_:1})]),_:1}))}};export{ae as default};
